set firewall interface eth5 in name 'wan-in'
set firewall interface eth5 local name 'lan-local'
set firewall name lan-local default-action 'drop'
set firewall name lan-local rule 10 action 'accept'
set firewall name lan-local rule 10 state established 'enable'
set firewall name lan-local rule 10 state related 'enable'
set firewall name lan-local rule 20 action 'accept'
set firewall name lan-local rule 20 icmp type-name 'echo-request'
set firewall name lan-local rule 20 protocol 'icmp'
set firewall name lan-local rule 20 state new 'enable'
set firewall name wan-in default-action 'drop'
set firewall name wan-in rule 10 action 'accept'
set firewall name wan-in rule 10 description 'Allow : Established / Related Traffic'
set firewall name wan-in rule 10 state established 'enable'
set firewall name wan-in rule 10 state related 'enable'
set firewall name wan-in rule 20 action 'accept'
set firewall name wan-in rule 20 destination port 'http'
set firewall name wan-in rule 20 protocol 'tcp'
set firewall name wan-in rule 20 state established 'enable'
set firewall name wan-in rule 20 state new 'enable'
set firewall name wan-in rule 20 state related 'enable'
set firewall name wan-in rule 21 action 'accept'
set firewall name wan-in rule 21 destination port 'https'
set firewall name wan-in rule 21 protocol 'tcp'
set firewall name wan-in rule 21 state established 'enable'
set firewall name wan-in rule 21 state new 'enable'
set firewall name wan-in rule 21 state related 'enable'
set interfaces ethernet eth0 hw-id 'e4:3a:6e:5b:07:7b'
set interfaces ethernet eth1 hw-id 'e4:3a:6e:5b:07:7c'
set interfaces ethernet eth2 hw-id 'e4:3a:6e:5b:07:7d'
set interfaces ethernet eth3 address '10.4.0.1/23'
set interfaces ethernet eth3 description 'homelab'
set interfaces ethernet eth3 hw-id 'e4:3a:6e:5b:07:7e'
set interfaces ethernet eth4 address '10.3.0.1/24'
set interfaces ethernet eth4 description 'LAN'
set interfaces ethernet eth4 hw-id 'e4:3a:6e:5b:07:7f'
set interfaces ethernet eth5 address 'dhcp'
set interfaces ethernet eth5 description 'WAN'
set interfaces ethernet eth5 hw-id 'e4:3a:6e:5b:07:80'
set interfaces loopback lo
set nat destination rule 50 destination address '10.4.240.2'
set nat destination rule 50 destination port '80'
set nat destination rule 50 inbound-interface 'eth5'
set nat destination rule 50 protocol 'tcp'
set nat destination rule 50 translation port '80'
set nat destination rule 51 destination address '10.4.240.2'
set nat destination rule 51 destination port '443'
set nat destination rule 51 inbound-interface 'eth5'
set nat destination rule 51 protocol 'tcp'
set nat destination rule 51 translation port '443'
set nat destination rule 100 description 'tcp/80 from external'
set nat destination rule 100 destination port '80'
set nat destination rule 100 inbound-interface 'eth5'
set nat destination rule 100 protocol 'tcp'
set nat destination rule 100 translation address '10.4.240.2'
set nat destination rule 110 description 'tcp/443 from external'
set nat destination rule 110 destination port '443'
set nat destination rule 110 inbound-interface 'eth5'
set nat destination rule 110 protocol 'tcp'
set nat destination rule 110 translation address '10.4.240.2'
set nat source rule 100 outbound-interface 'eth5'
set nat source rule 100 source address '10.3.0.0/24'
set nat source rule 100 translation address 'masquerade'
set nat source rule 101 outbound-interface 'eth5'
set nat source rule 101 source address '10.4.0.0/23'
set nat source rule 101 translation address 'masquerade'
set protocols bgp address-family ipv4-unicast network 10.4.240.0/23
set protocols bgp neighbor 10.4.0.41 address-family ipv4-unicast
set protocols bgp neighbor 10.4.0.41 remote-as '65528'
set protocols bgp neighbor 10.4.0.42 address-family ipv4-unicast
set protocols bgp neighbor 10.4.0.42 remote-as '65528'
set protocols bgp neighbor 10.4.0.43 address-family ipv4-unicast
set protocols bgp neighbor 10.4.0.43 remote-as '65528'
set protocols bgp neighbor 10.4.0.44 address-family ipv4-unicast
set protocols bgp neighbor 10.4.0.44 remote-as '65528'
set protocols bgp neighbor 10.4.0.45 address-family ipv4-unicast
set protocols bgp neighbor 10.4.0.45 remote-as '65528'
set protocols bgp parameters router-id '10.4.0.1'
set protocols bgp system-as '65529'
set service dhcp-server hostfile-update
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 default-router '10.4.0.1'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 domain-name 'homelab.danmanners.com'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 lease '7200'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 name-server '9.9.9.9'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 name-server '1.1.1.1'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 range 0 start '10.4.1.1'
set service dhcp-server shared-network-name HOMELAB subnet 10.4.0.0/23 range 0 stop '10.4.1.254'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 default-router '10.3.0.1'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 domain-name 'homelab.danmanners.com'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 lease '3600'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 name-server '10.3.0.1'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 range 0 start '10.3.0.50'
set service dhcp-server shared-network-name LAN subnet 10.3.0.0/24 range 0 stop '10.3.0.250'
set service dns forwarding allow-from '10.3.0.0/24'
set service dns forwarding allow-from '10.4.0.0/23'
set service dns forwarding cache-size '600'
set service dns forwarding domain homelab.danmanners.com server '10.3.0.1'
set service dns forwarding listen-address '10.3.0.1'
set service dns forwarding listen-address '10.4.0.1'
set service dns forwarding name-server '9.9.9.9'
set service dns forwarding name-server '1.1.1.1'
set service ntp allow-client address '10.4.0.0/23'
set service ntp allow-client address '10.3.0.0/24'
set service ntp listen-address '10.4.0.1'
set service ntp server 0.pool.ntp.org
set service ntp server 1.pool.ntp.org
set service ntp server 2.pool.ntp.org
set service ssh port '22'
set system config-management commit-revisions '100'
set system conntrack modules ftp
set system conntrack modules h323
set system conntrack modules nfs
set system conntrack modules pptp
set system conntrack modules sip
set system conntrack modules sqlnet
set system conntrack modules tftp
set system console device ttyS0 speed '115200'
set system host-name 'vyos'
set system login user vyos authentication encrypted-password '$6$b.XLn185s.bYzPgH$IORZ/HIzqTJHzC7OQc9dOAeeOWmmnhHEYpY645Zl.D8mavmJIY2N5oDTZMiDQjhhANg/0CM/j8XIW3GeVmbvz1'
set system login user vyos authentication plaintext-password ''
set system static-host-mapping host-name argocd.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name core.harbor.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name dex.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name excalidraw.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name kube.cloud.danmanners.com inet '172.29.14.5'
set system static-host-mapping host-name kube.homelab.danmanners.com inet '10.4.1.10'
set system static-host-mapping host-name notary.harbor.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name opcluster.homelab.danmanners.com inet '10.4.0.40'
set system static-host-mapping host-name proxmox.homelab.danmanners.com inet '10.4.0.20'
set system static-host-mapping host-name sonarqube.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name tekton.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name whiteboard.homelab.danmanners.com inet '10.4.240.2'
set system static-host-mapping host-name workflows.homelab.danmanners.com inet '10.4.240.2'
set system syslog global facility all level 'info'
set system syslog global facility protocols level 'debug'